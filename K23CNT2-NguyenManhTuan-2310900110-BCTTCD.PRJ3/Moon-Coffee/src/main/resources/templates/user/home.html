<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moon Coffee - Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CẤU HÌNH THEME --- */
        :root {
            --primary-color: #0f2c38;
            --accent-color: #c5a065;
            --bg-color: #f8f9fa;
            --white: #ffffff;
            --text-color: #333;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg-color); color: var(--text-color); font-family: 'Nunito', sans-serif; display: flex; flex-direction: column; min-height: 100vh; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }

        /* HEADER */
        header { background: var(--white); padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }

        .logo { font-family: 'Oswald', sans-serif; font-size: 26px; font-weight: bold; color: var(--primary-color); text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 10px; }
        .logo i { font-size: 32px; color: var(--accent-color); }
        .logo span { color: var(--accent-color); }

        .header-actions { display: flex; align-items: center; gap: 20px; }

        /* Nút Giỏ Hàng Mới */
        .cart-btn-header { position: relative; color: var(--primary-color); font-size: 22px; margin-right: 10px; }
        .cart-badge { position: absolute; top: -8px; right: -10px; background: #d63031; color: white; font-size: 11px; font-weight: bold; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; border-radius: 50%; border: 2px solid white; }

        .nav-btn { padding: 8px 20px; border-radius: 30px; font-weight: 700; background: var(--primary-color); color: var(--accent-color); font-size: 13px; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 4px 10px rgba(15, 44, 56, 0.3); }
        .nav-btn:hover { background: var(--accent-color); color: var(--primary-color); transform: translateY(-2px); }

        /* BANNER */
        .banner { background: linear-gradient(135deg, rgba(15, 44, 56, 0.9), rgba(15, 44, 56, 0.7)), url('https://images.unsplash.com/photo-1497935586351-b67a49e012bf?q=80&w=2000'); background-size: cover; background-position: center; height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--white); text-align: center; padding: 20px; position: relative; overflow: hidden; }
        .banner::before { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 50px; background: linear-gradient(to top, var(--bg-color), transparent); }

        .banner h1 { font-family: 'Oswald', sans-serif; font-size: 42px; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .banner p { font-size: 16px; margin-bottom: 30px; opacity: 0.9; font-weight: 300; letter-spacing: 1px; }

        .search-box { background: rgba(255,255,255,0.2); padding: 5px; border-radius: 50px; display: flex; width: 550px; max-width: 100%; border: 1px solid rgba(255,255,255,0.4); backdrop-filter: blur(10px); box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: 0.3s; }
        .search-box:focus-within { background: rgba(255,255,255,0.95); border-color: var(--white); }
        .search-box:focus-within input { color: var(--text-color); }
        .search-box:focus-within input::placeholder { color: #999; }

        .search-box input { background: transparent; border: none; outline: none; flex: 1; padding: 0 25px; font-size: 15px; color: white; transition: 0.3s; }
        .search-box input::placeholder { color: rgba(255,255,255,0.8); }
        .search-box button { background: var(--accent-color); color: var(--primary-color); border: none; padding: 12px 35px; border-radius: 50px; cursor: pointer; font-weight: 800; transition: 0.3s; text-transform: uppercase; font-size: 12px; }
        .search-box button:hover { background: var(--white); transform: scale(1.05); }

        /* DANH MỤC */
        .category-bar { display: flex; justify-content: center; gap: 12px; margin: 40px 0; flex-wrap: wrap; padding: 0 20px; }
        .cat-item { padding: 10px 25px; background: var(--white); border-radius: 50px; color: #666; font-weight: 700; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.03); font-size: 13px; text-transform: uppercase; border: 1px solid #eee; display: flex; align-items: center; gap: 8px; }
        .cat-item:hover, .cat-item.active { background: var(--primary-color); color: var(--accent-color); border-color: var(--primary-color); transform: translateY(-3px); box-shadow: 0 8px 20px rgba(15, 44, 56, 0.2); }

        /* SẢN PHẨM */
        .container { max-width: 1200px; margin: 0 auto 60px; padding: 0 20px; flex: 1; }

        .section-title { text-align: center; margin-bottom: 40px; font-size: 32px; color: var(--primary-color); font-family: 'Oswald', sans-serif; text-transform: uppercase; position: relative; letter-spacing: 1px; }
        .section-title::after { content: ''; display: block; width: 50px; height: 3px; background: var(--accent-color); margin: 15px auto 0; border-radius: 2px; }

        .product-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; }

        .product-card { background: var(--white); border-radius: 12px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.03); transition: 0.3s; display: flex; flex-direction: column; height: 100%; border: 1px solid transparent; position: relative; }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.08); border-color: rgba(197, 160, 101, 0.3); }

        /* Nhãn Mới (Trang trí) */
        .badge-new { position: absolute; top: 10px; left: 10px; background: #e74c3c; color: white; padding: 4px 10px; font-size: 10px; font-weight: bold; border-radius: 20px; z-index: 10; text-transform: uppercase; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

        .card-img-wrap { width: 100%; height: 200px; overflow: hidden; display: block; background: #f1f1f1; position: relative; }
        .product-img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .product-card:hover .product-img { transform: scale(1.08); }

        .product-info { padding: 20px; flex: 1; display: flex; flex-direction: column; text-align: center; }

        .category-tag { font-size: 10px; color: #999; font-weight: 800; text-transform: uppercase; margin-bottom: 8px; letter-spacing: 1px; }

        .product-name { font-size: 16px; font-weight: 800; margin-bottom: 5px; font-family: 'Nunito', sans-serif; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 44px; color: var(--primary-color); }
        .product-name:hover { color: var(--accent-color); }

        .product-price { font-size: 18px; color: var(--accent-color); font-weight: 700; margin-bottom: 15px; font-family: 'Oswald', sans-serif; }

        /* Nút thêm vào giỏ xịn */
        .btn-add-cart { margin-top: auto; width: 100%; padding: 10px; background: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); border-radius: 6px; font-weight: 700; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 12px; text-transform: uppercase; }

        .btn-add-cart:hover { background: var(--primary-color); color: var(--white); box-shadow: 0 5px 15px rgba(15, 44, 56, 0.2); }

        .no-result { grid-column: 1 / -1; text-align: center; padding: 60px; color: #888; background: white; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .back-link { color: var(--accent-color); font-weight: bold; margin-top: 15px; display: inline-block; padding: 10px 25px; border: 1px solid var(--accent-color); border-radius: 30px; transition: 0.2s; }
        .back-link:hover { background: var(--accent-color); color: white; }

        /* FOOTER */
        footer { background-color: var(--primary-color); color: rgba(255,255,255,0.7); padding: 60px 0 20px; margin-top: auto; border-top: 4px solid var(--accent-color); }
        .footer-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: grid; grid-template-columns: 1.5fr 1.5fr 1fr; gap: 40px; }
        .footer-col h3 { font-family: 'Oswald', sans-serif; font-size: 16px; color: var(--white); margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; position: relative; padding-bottom: 10px; }
        .footer-col h3::after { content: ''; position: absolute; bottom: 0; left: 0; width: 30px; height: 2px; background: var(--accent-color); }

        .footer-logo { font-family: 'Oswald', sans-serif; font-size: 28px; font-weight: bold; color: var(--white); margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .footer-logo i { color: var(--accent-color); }
        .footer-col p { margin-bottom: 12px; font-size: 14px; line-height: 1.6; display: flex; gap: 12px; }
        .footer-col i.icon { color: var(--accent-color); margin-top: 4px; min-width: 15px; }
        .footer-col ul { list-style: none; }
        .footer-col ul li { margin-bottom: 10px; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px; }
        .footer-col ul li a:hover { color: var(--accent-color); padding-left: 5px; }
        .social-icons { margin-top: 20px; font-size: 18px; display: flex; gap: 15px; }
        .social-icons i { width: 35px; height: 35px; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: 0.3s; cursor: pointer; }
        .social-icons i:hover { background: var(--accent-color); color: var(--primary-color); }
        .copyright { text-align: center; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 50px; padding-top: 25px; font-size: 13px; opacity: 0.6; }

        /* Responsive */
        @media (max-width: 1024px) { .product-grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 768px) {
            .product-grid { grid-template-columns: repeat(2, 1fr); }
            .header-actions { gap: 10px; }
            .nav-btn { padding: 8px 12px; font-size: 11px; }
        }
        @media (max-width: 480px) {
            .product-grid { grid-template-columns: 1fr; }
            .footer-container { grid-template-columns: 1fr; }
            .banner h1 { font-size: 32px; }
            .search-box { width: 100%; }
        }
    </style>
</head>
<body>

<header>
    <a href="/" class="logo"><i class="fas fa-coffee"></i> Moon <span>Coffee</span></a>

    <div class="header-actions">
        <a href="/cart" class="cart-btn-header">
            <i class="fas fa-shopping-bag"></i>
            <span class="cart-badge" th:text="${cartCount != null ? cartCount : 0}">0</span>
        </a>

        <a href="/login" class="nav-btn"><i class="fas fa-user"></i> Đăng nhập</a>
    </div>
</header>

<div class="banner">
    <h1>Thưởng thức tinh hoa</h1>
    <p>Hương vị cà phê nguyên bản & Không gian đẳng cấp</p>
    <form action="/" method="get" class="search-box">
        <input type="text" name="keyword" placeholder="Tìm kiếm món yêu thích..." th:value="${param.keyword}" autocomplete="off">
        <button type="submit">Tìm Ngay</button>
    </form>
</div>

<div class="category-bar">
    <a href="/" class="cat-item" th:classappend="${currentCategoryId == null} ? 'active'">
        <i class="fas fa-layer-group"></i> Tất cả
    </a>
    <a th:each="cat : ${categories}" th:href="@{/(categoryId=${cat.id})}" class="cat-item" th:classappend="${currentCategoryId == cat.id} ? 'active'">
        <i class="fas fa-mug-hot" th:if="${cat.name.contains('Cà phê')}"></i>
        <i class="fas fa-leaf" th:if="${cat.name.contains('Trà')}"></i>
        <i class="fas fa-snowflake" th:if="${cat.name.contains('Đá xay')}"></i>
        <span th:text="${cat.name}">Danh Mục</span>
    </a>
</div>

<div class="container">
    <h2 class="section-title" th:if="${currentCategoryId == null && param.keyword == null}">Thực Đơn Đặc Biệt</h2>
    <h2 class="section-title" th:if="${param.keyword != null}">Kết quả cho: "<span th:text="${param.keyword}"></span>"</h2>
    <h2 class="section-title" th:if="${currentCategoryId != null}">Danh mục đã chọn</h2>

    <div class="product-grid">
        <div th:if="${products.empty}" class="no-result">
            <img src="https://cdn-icons-png.flaticon.com/512/6134/6134065.png" width="80" style="margin-bottom: 20px; opacity: 0.5;">
            <h3>Rất tiếc, không tìm thấy món nào!</h3>
            <p>Hãy thử tìm từ khóa khác hoặc quay lại trang chủ.</p>
            <a href="/" class="back-link">Quay lại thực đơn</a>
        </div>

        <div class="product-card" th:each="p : ${products}">
            <span class="badge-new">Mới</span>

            <a th:href="@{/product/{id}(id=${p.id})}" class="card-img-wrap">
                <img th:if="${p.imageName != null}" th:src="@{'/images/products/' + ${p.imageName}}" class="product-img">
                <img th:if="${p.imageName == null}" src="https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=600" class="product-img">
            </a>

            <div class="product-info">
                <div class="category-tag" th:text="${p.category != null ? p.category.name : 'SIGNATURE'}">CATEGORY</div>

                <a th:href="@{/product/{id}(id=${p.id})}" class="product-name" th:text="${p.name}">Tên Món</a>

                <div class="product-price" th:text="${#numbers.formatDecimal(p.price, 0, 'POINT', 0, 'POINT')} + ' đ'">0 đ</div>

                <a th:href="@{/cart/add/{id}(id=${p.id})}" class="btn-add-cart">
                    <i class="fas fa-cart-plus"></i> Thêm món
                </a>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="footer-container">
        <div class="footer-col">
            <div class="footer-logo"><i class="fas fa-coffee"></i> MOON <span>COFFEE</span></div>
            <p>Nơi hội tụ những hương vị cà phê tuyệt hảo nhất, được tuyển chọn kỹ lưỡng và pha chế bằng cả trái tim.</p>
            <div class="social-icons">
                <i class="fab fa-facebook-f"></i> <i class="fab fa-instagram"></i> <i class="fab fa-youtube"></i>
            </div>
        </div>
        <div class="footer-col">
            <h3>Liên hệ</h3>
            <p><i class="fas fa-map-marker-alt icon"></i> <span>Tầng 1, Tòa nhà Moon, Q.1, TP.HCM</span></p>
            <p><i class="fas fa-envelope icon"></i> <span>support@mooncoffee.vn</span></p>
            <p><i class="fas fa-phone-alt icon"></i> <span>1900 6688</span></p>
        </div>
        <div class="footer-col">
            <h3>Hỗ trợ</h3>
            <ul>
                <li><a href="#">Về chúng tôi</a></li>
                <li><a href="#">Hướng dẫn mua hàng</a></li>
                <li><a href="#">Chính sách đổi trả</a></li>
            </ul>
        </div>
    </div>
    <div class="copyright">&copy; 2025 Moon Coffee Premium. All rights reserved.</div>
</footer>

</body>
</html>